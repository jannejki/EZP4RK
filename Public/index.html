<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>EZ-P4RK</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="./images/logo.png" type="image/x-icon">
    <!--------HEADER-------->
    <body>
    <section class="header">
        <nav>
            <a href="index.html"><img src="./images/logo.png" alt=""></a>
            <div class="nav-links" id="navLinks">
                <img class="close" onclick="hideMenu()" src="./images/close.png" alt="close">
                <ul>
                    <li><button onclick="homediv()">HOME</button></li>
                    <li><button onclick="aboutdiv()">ABOUT</button></li>
                    <li><button onclick="contactdiv()">CONTACT</button></li>       
                </ul>
            </div>
            <img class="menu" onclick="showMenu()" src="./images/menu.png" alt="menu">
        </nav>
        <div class="text-box">
            <h1>EZ-P4RK</h1>
            <div class="parkingspots">
                <svg class="parking"><g transform="translate(0.000000,294.000000) scale(0.100000,-0.100000)"
                    fill="#ffffff" stroke="none">
                    <path id="spot1" d="M0 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot2" d="M580 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot3" d="M1160 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot4" d="M1740 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot5" d="M2320 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot6" d="M2900 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot7" d="M3480 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot8" d="M4060 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot9" d="M4640 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot10" d="M5220 2495 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot11" d="M320 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot12" d="M900 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot13" d="M1480 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot14" d="M2060 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot15" d="M2640 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot16" d="M3220 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot17" d="M3800 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot18" d="M4380 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot19" d="M4960 1465 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot20" d="M900 445 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot21" d="M1480 445 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot22" d="M2060 445 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot23" d="M2640 445 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot24" d="M3220 445 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot25" d="M3800 445 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    <path id="spot26" d="M4380 445 l0 -445 265 0 265 0 0 445 0 445 -265 0 -265 0 0 -445z"/>
                    </g>                   
                </svg>
            </div>
        </div>
    </section>
<!--------ABOUT-------->
    <section id="aboutdiv" class="about">
        <div class="ab">
            <h1>Project Pictures</h1>
            <p> Lorem ipsum, dolor sit amet consectetur adipisicing elit. Delectus eaque, quae facilis eveniet, magni aliquid possimus neque fugiat ipsum sequi ducimus assumenda perferendis fuga officia ipsa id quod voluptate sit nesciunt ratione perspiciatis esse adipisci doloremque nemo. Architecto ipsa eligendi, beatae totam velit minima repellat repellendus ad perspiciatis quos odio.</p>
        </div>
        <div class="gallery">
            <div class="container">
                <div class="card">
                    <div class="imgBx">
                        <img src="./images/camera.jpg" alt="camera">
                    </div>
                    <div class="contentBx">
                        <div class="content">
                            <h3>Post One</h3>
                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nemo repellendus laudantium atque animi sit eius laborum id suscipit tempora ex quod optio, eum numquam voluptatum quam ipsa minima maiores dolorem.</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="imgBx">
                        <img src="./images/flowchart.jpg" alt="camera">
                    </div>
                    <div class="contentBx">
                        <div class="content">
                            <h3>Post Two</h3>
                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nemo repellendus laudantium atque animi sit eius laborum id suscipit tempora ex quod optio, eum numquam voluptatum quam ipsa minima maiores dolorem.</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="imgBx">
                        <img src="./images/raspi testing.jpg" alt="camera">
                    </div>
                    <div class="contentBx">
                        <div class="content">
                            <h3>Post Three</h3>
                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nemo repellendus laudantium atque animi sit eius laborum id suscipit tempora ex quod optio, eum numquam voluptatum quam ipsa minima maiores dolorem.</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="imgBx">
                        <img src="./images/raspi camera.jpg" alt="camera">
                    </div>
                    <div class="contentBx">
                        <div class="content">
                            <h3>Post Four</h3>
                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nemo repellendus laudantium atque animi sit eius laborum id suscipit tempora ex quod optio, eum numquam voluptatum quam ipsa minima maiores dolorem.</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="imgBx">
                        <img src="./images/joonaslookingjannewondering.jpg" alt="camera">
                    </div>
                    <div class="contentBx">
                        <div class="content">
                            <h3>Post Five</h3>
                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nemo repellendus laudantium atque animi sit eius laborum id suscipit tempora ex quod optio, eum numquam voluptatum quam ipsa minima maiores dolorem.</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="imgBx">
                        <img src="./images/tamperprotectino.jpg" alt="camera">
                    </div>
                    <div class="contentBx">
                        <div class="content">
                            <h3>Post Six</h3>
                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nemo repellendus laudantium atque animi sit eius laborum id suscipit tempora ex quod optio, eum numquam voluptatum quam ipsa minima maiores dolorem.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!---FOOTER-->

<!--------SCRIPT-------->
<script>
    var navLinks = document.getElementById("navLinks");
    function showMenu() {
        navLinks.style.right = "0";
    }
    function hideMenu() {
        navLinks.style.right = "-150px";
    }

//smoothscroll
function aboutdiv() {
                var elem = document.getElementById("aboutdiv");
                elem.scrollIntoView({behavior: "smooth", block: "start", inline: "nearest"});;
            }
</script>

<!-- Tää socket.io script pitää olla ennen scriptiä missä käytetää websocketia-->
<script src="http://152.70.178.116:3000/socket.io/socket.io.js"></script>

<script> 

    const ws  = io();

    // websocket kanavat mitä kuunnellaan
    const parkingLotStatus = 'parkingLotStatus';
    const updatedParkingSpot = 'updatedParkingSpot';

    // tää tapahtuu aina kun sivu päivitetään
    ws.on(parkingLotStatus, (message) => {
        console.log('kaikki parkkipaikat: ', message);
        for(let n of message) {
            const path = document.getElementById(n.name);
            if (n.state) {
                path.setAttribute("fill", "green");
            }
            else {
                path.setAttribute("fill", "red");
            }
        }
        /*message: [
                        {
                            "name": "Spot1",
                            "fields": {
                            "state": false,
                            "inva": false
                            }
                        },
                        {
                            "name": "Spot2",
                            "fields": {
                            "state": true,
                            "inva": false
                            }
                        },
                        {
                            "name": "Spot3",
                            "fields": {
                            "inva": true,
                            "state": true
                            }
                        }
                    ]
        */
    });

    // tää tapahtuu aina kun auto tulee tai lähtee parkkipaikalta
    ws.on(updatedParkingSpot, (message) => {
        console.log('päivitetty parkkipaikka: ', message);
        //   message = { name: "Spot1", fields: { inva: false, state: false } }
    })
</script>
</body>
</html>